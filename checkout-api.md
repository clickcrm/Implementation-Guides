<h1>Checkout API - Implementation Guide</h1><br>
<p><strong>Include the following Javascript code on your checkout page:</strong><br></p>
<pre>
<code><script type="text/javascript">var ClickCRM_DoCheckout=function(){var s,o,a="",i="",n={result:0,result_str:"Oops! Something went wrong. Please try again"};function r(e){var t=n;try{t=JSON.parse(this.responseText)}catch(e){}o(t)}function c(e){o(n)}function u(e){o(n)}function l(e){var t,n;0<e.status||(t=e,(n=new XMLHttpRequest).submittedData=t,n.addEventListener("load",r),n.addEventListener("error",c),n.addEventListener("abort",u),n.open("post",t.receiver,!0),n.setRequestHeader("Content-Type",t.contentType),n.send(t.segments.join("&")))}function t(e){var t,n,s;this.contentType="application/x-www-form-urlencoded",this.receiver="https://secure.clickcrm.com/v2/docheckout",this.status=0,this.segments=["a="+i,"t="+a];for(var o=escape,r=0;r<e.elements.length;r++)if((s=e.elements[r]).hasAttribute("name"))if("FILE"===(n="INPUT"===s.nodeName.toUpperCase()?s.getAttribute("type").toUpperCase():"TEXT")&&0<s.files.length)for(t=0;t<s.files.length;this.segments.push(o(s.name)+"="+o(s.files[t++].name)));else("RADIO"!==n&&"CHECKBOX"!==n||s.checked)&&this.segments.push(o(s.name)+"="+o(s.value));a="",l(this)}function p(n){var s=new XMLHttpRequest;s.addEventListener("load",function(e){var t;try{s.readyState===s.DONE&&200===s.status&&(t=JSON.parse(s.responseText),a=t.token,i=t.a,"function"==typeof n&&n())}catch(e){}}),s.open("GET","checkout-init.php"),s.send()}function h(e){console.log("FORM: "+s),console.log("CHECKOUT: "+a),new t(s)}return p(),function(e,t){var n;s=document.getElementById(e),o=t,n=h,""!==a?(console.log("USING EXISTING TOKEN"),n()):(console.log("GETTING NEW TOKEN"),p(n))}}();</script>
</code>
</pre>
